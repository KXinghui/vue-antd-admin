(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0538":function(t,e,n){"use strict";var i=n("1c0b"),o=n("861d"),a=[].slice,r={},c=function(t,e,n){if(!(e in r)){for(var i=[],o=0;o<e;o++)i[o]="a["+o+"]";r[e]=Function("C,a","return new C("+i.join(",")+")")}return r[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=a.call(arguments,1),r=function(){var i=n.concat(a.call(arguments));return this instanceof r?c(e,i.length,i):e.apply(t,i)};return o(e.prototype)&&(r.prototype=e.prototype),r}},"05b0":function(t,e,n){var i=n("07c6");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("46f1139b",i,!0,{sourceMap:!1,shadowMode:!1})},"07c6":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".identity-login{width:100%;margin:0 auto}.ant-tabs-nav-scroll{display:flex}.login-scan-code-wrap,.login-wrap{display:flex;flex-direction:column;justify-content:center;align-items:center}.login-scan-code-wrap .login-scan-code{width:160px;height:160px}.login-scan-code-wrap{margin:.4rem 0 1.3rem}.login-scan-code-wrap .login-scan-code-expiration{display:flex;justify-content:center;align-items:center;position:absolute;width:170px;height:170px;background-color:rgba(177,180,182,.4)}.identity-login-footer,.identity-login-header{margin:-1rem 0 0}",""]),t.exports=e},"0d0a":function(t,e,n){var i=n("c58e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("4de19a0a",i,!0,{sourceMap:!1,shadowMode:!1})},"15c4":function(t,e,n){"use strict";var i=n("d4ec"),o=n("bee2"),a=n("262e"),r=n("2caf"),c=n("3d83"),l=n("9390"),s=function(t){Object(a["a"])(n,t);var e=Object(r["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n,[{key:"insert",value:function(t,e){return c["b"].post(this.buildUrl(""),t,e)}},{key:"update",value:function(t,e){return c["b"].post(this.buildUrl(""),t,e)}},{key:"delete",value:function(t,e){return c["b"].delete(this.buildUrl(""),t,e)}},{key:"get",value:function(t,e){return c["b"].get(this.buildUrl(""),t,e)}},{key:"list",value:function(t,e){return c["b"].post(this.buildUrl("/list"),t,e)}},{key:"listAccurate",value:function(t,e){return this.list(Object.assign(t,{listMode:"accurate"}),e)}},{key:"listFuzzy",value:function(t,e){return this.list(Object.assign(t,{listMode:"fuzzy"}),e)}},{key:"pageList",value:function(t,e){return c["b"].post(this.buildUrl("/pageList"),t,e)}},{key:"pageListAccurate",value:function(t,e){return this.pageList(Object.assign(t,{listMode:"accurate"}),e)}},{key:"pageListFuzzy",value:function(t,e){return this.pageList(Object.assign(t,{listMode:"fuzzy"}),e)}},{key:"tableList",value:function(t,e){return c["b"].post(this.buildUrl("/tableList"),t,e)}},{key:"tableListAccurate",value:function(t,e){return this.tableList(Object.assign(t,{listMode:"accurate"}),e)}},{key:"tableListFuzzy",value:function(t,e){return this.tableList(Object.assign(t,{listMode:"fuzzy"}),e)}}]),n}(l["a"]);e["a"]=s},"17ce":function(t,e,n){"use strict";n("6489")},"1c3e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"identity-login-wrap"},[n("base-header",{attrs:{showBackIcon:""}}),n("base-main",{staticStyle:{"background-color":"#f5f5f5"},attrs:{isScroll:!0,isScrollPull:!1,baseMainTop:"7.25%",baseMainHeight:"92.5%"}},[n("template",{slot:"main"},[n("a-row",{attrs:{type:"flex",justify:"center"}},[n("a-col",{attrs:{xs:22,sm:18,md:10,lg:6,xl:6}},[n("h1",{attrs:{align:"center"}},[t._v(t._s(t.msAlias))])])],1),n("a-row",{attrs:{type:"flex",justify:"center"}},[n("a-col",{attrs:{xs:22,sm:18,md:10,lg:6,xl:6}},[n("identity-login",{attrs:{"identity-role":t.identityRole},scopedSlots:t._u([{key:"footer",fn:function(){return[n("div",{staticClass:"identity-login-footer-op"},[n("a-button",{attrs:{type:"link"},on:{click:function(e){return t.pushRoute({path:t.registerUrl})}}},[n("span",[t._v("注册")])]),n("a-button",{attrs:{type:"link"},on:{click:function(e){return t.pushRoute({path:t.forgetPasswordUrl})}}},[n("span",[t._v("忘记密码")])])],1),n("div",{staticClass:"thirdparty-wrap"},t._l(t.supportThirdPartys,(function(e){return n("a-button",{key:e.thirdParty,attrs:{disabled:!t.isSupport(e.thirdParty),size:"large",shape:"circle",title:e.title},on:{click:function(n){return t.authorizeUrl(e.thirdParty)}}},[n("icon",{attrs:{icon:"IconFont_"+e.thirdParty}})],1)})),1)]},proxy:!0}])})],1)],1)],1)],2)],1)},o=[],a=(n("caad"),n("d81d"),n("2532"),n("5530")),r=n("b5d2"),c=n("e2a8"),l=n("2f62"),s=n("7902"),u={name:"IdentityLoginView",mixins:[r["a"]],components:{IdentityLogin:c["a"]},data:function(){return{modalTitle:"",modalVisible:!1}},props:{ms:{type:[String],default:"",required:!0},msAlias:{type:[String],default:"",required:!0},identityRole:{type:[String],default:"",required:!0}},computed:Object(a["a"])({registerUrl:function(){return["cloud","vue-antd-admin"].includes(this.ms)?"/register":"/".concat(this.ms,"/register")},forgetPasswordUrl:function(){return["cloud","vue-antd-admin"].includes(this.ms)?"/password/forget":"/".concat(this.ms,"/password/forget")}},Object(l["d"])({supportThirdPartys:function(t){return t.admin.supportThirdPartys},thirdPartySupport:function(t){return t.admin.thirdPartySupport}})),methods:{isSupport:function(t){return this.thirdPartySupport.includes(t)},authorizeUrl:function(t){s["a"].authorizeUrl(t).then((function(t){var e=t.data.map.authorizeUrl;e&&(window.location.href=e)}))}}},d=u,f=(n("17ce"),n("2877")),p=Object(f["a"])(d,i,o,!1,null,null,null);e["a"]=p.exports},"257e":function(t,e,n){"use strict";function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return i}))},"262e":function(t,e,n){"use strict";function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}n.d(e,"a",(function(){return o}))},2938:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return f}));n("caad"),n("b0c0"),n("2532");var i=n("257e"),o=n("262e"),a=n("2caf"),r=n("d4ec"),c=n("bee2"),l=n("ade3"),s=function(){function t(e,n,i,o){Object(r["a"])(this,t),Object(l["a"])(this,"id",void 0),Object(l["a"])(this,"name",void 0),Object(l["a"])(this,"value",void 0),Object(l["a"])(this,"desc",void 0),this.id=e,this.name=n,this.value=i,this.desc=o}return Object(c["a"])(t,[{key:"equals",value:function(t){return this.id==t|this.value==t|this.name==t}}],[{key:"enums",value:function(e,n,i,o){return new t(e,n,i,o)}},{key:"of",value:function(e){var n=new t;for(var i in this){var o=[this[i]["id"],this[i]["name"],this[i]["value"]];o.includes(e)&&(n=this[i])}return n}},{key:"selectOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=[];for(var i in this)n.push({enum:this[i],name:this[i][t],value:this[i][e]});return n}}]),t}(),u=function(t){Object(o["a"])(n,t);var e=Object(a["a"])(n);function n(t,o,a,c,s){var u;return Object(r["a"])(this,n),u=e.call(this,t,o,a,c),Object(l["a"])(Object(i["a"])(u),"mapping",void 0),u.mapping=s,u}return Object(c["a"])(n,null,[{key:"enums",value:function(t,e,i,o,a){return new n(t,e,i,o,a)}},{key:"of",value:function(t){var e=new n;for(var i in this){var o=[this[i]["id"],this[i]["name"],this[i]["value"],this[i]["mapping"]];o.includes(t)&&(e=this[i])}return e}}]),n}(s),d=function(t){Object(o["a"])(n,t);var e=Object(a["a"])(n);function n(){return Object(r["a"])(this,n),e.apply(this,arguments)}return n}(u);Object(l["a"])(d,"USERNAME",d.enums(0,"USERNAME","UserName","用户名","username")),Object(l["a"])(d,"PASSWORD",d.enums(1,"PASSWORD","Password","密码","password")),Object(l["a"])(d,"MAIL",d.enums(2,"MAIL","Mail","邮箱","mail")),Object(l["a"])(d,"MOBILE",d.enums(3,"MOBILE","Mobile","手机","mobile")),Object(l["a"])(d,"SCAN_CODE",d.enums(4,"SCAN_CODE","ScanCode","扫码","scanCode")),Object(l["a"])(d,"GITHUB",d.enums(5,"GITHUB","GitHub","GitHub","github")),Object(l["a"])(d,"GITEE",d.enums(6,"GITEE","Gitee","Gitee","gitee")),Object(l["a"])(d,"OSCHINA",d.enums(7,"OSCHINA","OSChina","开源中国","oschina")),Object(l["a"])(d,"DINGTALK",d.enums(8,"DINGTALK","DingTalk","钉钉","dingtalk")),Object(l["a"])(d,"ALIPAY",d.enums(9,"ALIPAY","Alipay","支付宝","alipay")),Object(l["a"])(d,"WECHAT",d.enums(10,"WECHAT","WeChat","微信","wechat")),Object(l["a"])(d,"QQ",d.enums(11,"QQ","QQ","qq","qq")),Object(l["a"])(d,"MICRO_BLOG",d.enums(12,"MICRO_BLOG","MicroBlog","微博","microblog"));var f=function(t){Object(o["a"])(n,t);var e=Object(a["a"])(n);function n(){return Object(r["a"])(this,n),e.apply(this,arguments)}return n}(u);Object(l["a"])(f,"USER",f.enums(0,"USER","user","用户","user")),Object(l["a"])(f,"SYS_USER",f.enums(1,"SYS_USER","sysuser","系统用户","sysUser")),Object(l["a"])(f,"CHAT_USER",f.enums(2,"CHAT_USER","chatuser","聊天用户","chatUser"))},"2aac":function(t,e,n){var i=n("edcf");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("53ff3030",i,!0,{sourceMap:!1,shadowMode:!1})},"2caf":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n("4ae1"),n("3410");function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}n("d3b7"),n("25f0");function o(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var a=n("53ca"),r=n("257e");function c(t,e){return!e||"object"!==Object(a["a"])(e)&&"function"!==typeof e?Object(r["a"])(t):e}function l(t){var e=o();return function(){var n,o=i(t);if(e){var a=i(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return c(this,n)}}},"2e17":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".login .identity-login{margin-top:3.2rem}.login h1{color:#000;transition:.5s}.login h1:hover{color:#000;text-shadow:0 0 .1em,0 0 .3em}",""]),t.exports=e},3410:function(t,e,n){var i=n("23e7"),o=n("d039"),a=n("7b0b"),r=n("e163"),c=n("e177"),l=o((function(){r(1)}));i({target:"Object",stat:!0,forced:l,sham:!c},{getPrototypeOf:function(t){return r(a(t))}})},"362d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-modal",t._b({attrs:{bodyStyle:{height:t.modalHeight},centered:t.modalCentered,"ok-text":"确认","cancel-text":"取消"},on:{cancel:t.cancelModal},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},"a-modal",t.$props,!1),[n("a-spin",{staticClass:"modal-body",attrs:{spinning:t.modalLoading}},[n("a-anchor",{directives:[{name:"show",rawName:"v-show",value:t.showAnchor,expression:"showAnchor"}],staticStyle:{position:"absolute","z-index":"10",left:"5rem"},attrs:{affix:!0},on:{click:t.handleAnchorClick,change:t.handleAnchorChange}},t._l(t.anchors,(function(t){return n("a-anchor-link",{key:t.href,attrs:{href:t.href,title:t.title}})})),1),n("div",[n("span",{staticClass:"modal-btn-span"},[n("icon",{directives:[{name:"show",rawName:"v-show",value:t.showAnchor,expression:"showAnchor"}],staticClass:"modal-btn",attrs:{icon:t.showAnchor?"Antd_close":"IconFont_anchor"},on:{click:t.toggleAnchor}})],1)]),n("bs-core",{attrs:{options:{nestedScroll:!0,bounce:{top:!1,bottom:!1}},isRefresh:t.modalRefresh},on:{"update:isRefresh":function(e){t.modalRefresh=e},"update:is-refresh":function(e){t.modalRefresh=e}}},[n("div",{ref:t.modalRef,staticClass:"modal-body"},[t._t("default")],2)])],1),n("template",{slot:"title"},[n("div",[t._t("title",[t._v(t._s(t.modalTitle))])],2)]),n("template",{slot:"footer"},[n("a-spin",{attrs:{spinning:t.modalLoading}},[t._t("footer")],2)],1)],2)},o=[],a=n("dbde"),r={components:{BsCore:a["a"]},name:"BaseModal",data:function(){var t=this;return{modalRef:"base-modal-".concat(this._uid),anchorContainer:function(){return t.$refs[t.modalRef]||t.$refs[t.modalRef].$el},showAnchor:!1,modalHeight:0,visible:!1}},props:{modalRefresh:{type:[Boolean],default:!1,require:!1},modalLoading:{type:[Boolean],default:!1,require:!1},modalHeightPercent:{type:[String],default:"80%",require:!1},anchors:{type:[Array],default:function(){return[]},require:!1},modalTitle:{type:[String],default:"",require:!1},modalVisible:{type:[Boolean],default:!1,require:!1},modalCentered:{type:[Boolean],default:!0,require:!1},destroyOnClose:{type:[Boolean],default:!1,require:!1}},methods:{handleAnchorClick:function(t,e){t.preventDefault()},handleAnchorChange:function(t){this.$emit("changeAnchor",t)},toggleAnchor:function(){this.showAnchor=!this.showAnchor},resizeModalHeight:function(){var t=window.innerHeight||document.documentElement.clientHeight;this.modalHeight=t*parseFloat(this.modalHeightPercent)*.01+"px"},cancelModal:function(){this.$emit("update:modalVisible",!1)}},watch:{modalHeightPercent:function(){this.resizeModalHeight()},modalVisible:function(){this.visible=this.modalVisible}},mounted:function(){this.resizeModalHeight(),this.visible=this.modalVisible,window.addEventListener("resize",this.resizeModalHeight)},destroyed:function(){window.removeEventListener("resize",this.resizeModalHeight)}},c=r,l=(n("5d5e"),n("2877")),s=Object(l["a"])(c,i,o,!1,null,null,null);e["a"]=s.exports},"4ae1":function(t,e,n){var i=n("23e7"),o=n("d066"),a=n("1c0b"),r=n("825a"),c=n("861d"),l=n("7c73"),s=n("0538"),u=n("d039"),d=o("Reflect","construct"),f=u((function(){function t(){}return!(d((function(){}),[],t)instanceof t)})),p=!u((function(){d((function(){}))})),h=f||p;i({target:"Reflect",stat:!0,forced:h,sham:h},{construct:function(t,e){a(t),r(e);var n=arguments.length<3?t:a(arguments[2]);if(p&&!f)return d(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(s.apply(t,i))}var o=n.prototype,u=l(c(o)?o:Object.prototype),h=Function.apply.call(t,u,e);return c(h)?h:u}})},"4db5":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".modal-btn-span{display:block;width:56px;height:56px;font-size:16px;font-style:normal;line-height:56px;text-align:center;text-transform:none;text-rendering:auto;position:absolute;top:0;left:0}.modal-btn{padding:0;color:rgba(0,0,0,.45);font-weight:700;line-height:1;text-decoration:none;background:transparent;border:0;outline:0;cursor:pointer;transition:color .3s}.modal-body,.modal-body .ant-spin-container{width:100%;height:100%}",""]),t.exports=e},"534f":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".confirm-login .identity-login{margin-top:3.2rem}.confirm-login h1{color:#000;transition:.5s}.confirm-login h1:hover{color:#000;text-shadow:0 0 .1em,0 0 .3em}",""]),t.exports=e},"5d5e":function(t,e,n){"use strict";n("d9a0")},6489:function(t,e,n){var i=n("c8ea");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("eef92208",i,!0,{sourceMap:!1,shadowMode:!1})},"67c6":function(t,e,n){var i=n("7b95");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("819cf3f0",i,!0,{sourceMap:!1,shadowMode:!1})},"6bbe4":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"confirm-login"},[n("identity-confirm-login-view",{attrs:{ms:"vue-antd-admin",msAlias:"Vue Antd Admin",identityRole:t.identityRole}})],1)},o=[],a=(n("caad"),n("2532"),n("5530")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"identity-confirm-login-wrap"},[n("base-header",{attrs:{showBackIcon:""}}),n("base-main",{staticStyle:{"background-color":"#f5f5f5"},attrs:{isScroll:!0,isScrollPull:!1,baseMainTop:"7.25%",baseMainHeight:"92.5%"}},[n("template",{slot:"main"},[n("a-row",{attrs:{type:"flex",justify:"center"}},[n("a-col",{attrs:{xs:22,sm:18,md:10,lg:6,xl:6}},[n("h1",{attrs:{align:"center"}},[t._v(t._s(t.msAlias))])])],1),n("a-row",{attrs:{type:"flex",justify:"center"}},[n("a-col",{attrs:{xs:22,sm:18,md:10,lg:6,xl:6}},[n("identity-confirm-login",{attrs:{identityRole:t.identityRole}})],1)],1)],1)],2)],1)},c=[],l=n("b5d2"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"identity-confirm-login"},[n("div",{staticClass:"identity-confirm-login-header"},[t._t("header")],2),n("div",{staticClass:"identity-confirm-login-main"},[n("div",{staticClass:"device-icon"},[n("icon",{attrs:{icon:t.deviceIcon}}),n("span",[t._v(" "+t._s(t.loginScanCodeDevice))])],1),n("identity-avatar",{attrs:{avatarSize:100,identity:t.identity}}),n("a-button",{attrs:{disabled:t.isExpire,loading:t.isConfirm&&t.loginLoading.scanCode,type:"primary",block:""},on:{click:function(e){return t.confirmLogin(!0)}}},[t._v(" "+t._s(t.isExpire?"确认登录(二维码无效或失效)":"确认登录")+" ")]),n("a-button",{attrs:{disabled:t.isExpire,loading:!t.isConfirm&&t.loginLoading.scanCode,type:"info",block:""},on:{click:function(e){return t.confirmLogin(!1)}}},[t._v(" "+t._s(t.isExpire?"取消(二维码无效或失效)":"取消")+" ")])],1),n("div",{staticClass:"identity-confirm-login-footer"},[t._t("footer")],2)])},u=[],d=(n("d81d"),n("ade3")),f=n("887d"),p=n("39a9"),h=n("3d83"),m=n("9cc4"),g=n("2f62"),b={name:"IdentityConfirmLogin",mixins:[l["a"],f["a"]],components:{IdentityAvatar:p["a"]},data:function(){return{loginCancleTokenSource:{scanCode:null},loginLoading:{scanCode:!1},loginScanCodeDevice:"UNKNOWN",loginScanCodeExpiration:-1,isEnterView:!1,isConfirmLogin:!1}},props:{identityRole:{type:[String],default:"",required:!0}},computed:Object(a["a"])({isExpire:function(){return 0==this.loginScanCodeExpiration},deviceIcon:function(){var t=this.loginScanCodeDevice;return["MOBILE","TABLET"].includes(t)?"Antd_".concat(t.toLowerCase()):"COMPUTER"==t?"Antd_desktop":"WEARABLE"==t?"IconFont_watch":"IconFont_devices"}},Object(g["d"])({identity:function(t){return t.identity.identity}})),methods:{enterView:function(){var t=this;if(!t.isEnterView){var e=t.$route.query.scancode;m["a"].enterView({scanCode:e}).then((function(e){if(1==e.data.code){var n=e.data.map,i=n.device,o=n.scanCodeExpiration;o&&(t.loginScanCodeExpiration=o),t.loginScanCodeDevice=i,t.isEnterView=!0;var a=setInterval((function(){t.isConfirmLogin||(t.loginScanCode="",t.loginScanCodeExpiration=0),clearInterval(a)}),1e3*o)}else t.loginScanCodeExpiration=0}))}},confirmLogin:function(t){var e=this;if(!e.isConfirmLogin){if(e.isConfirm=t,!t){var n=e.getLoginCancleTokenSource(!1);e.loginLoading.scanCode&&n&&n.cancel()}var i=e.$route.query.scancode;e.loginLoading.scanCode=!0,m["a"].confirmLogin({scanCode:i,isConfirm:t},Object(d["a"])({},h["a"],e.getLoginCancleTokenSource().token)).then((function(t){if(1==t.data.code)e.loginLoading.scanCode=!1,e.isConfirmLogin=!0;else{var n=t.map.scanCodeExpiration;n&&(e.loginScanCodeExpiration=n)}}))}},getLoginCancleTokenSource:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e="scanCode",n=this.loginCancleTokenSource[e];return!n&&t&&(n=Object(h["c"])(),this.loginCancleTokenSource[e]=n),n},handleAfterLogin:function(t){var e=t.map;e.Authorization,e.AuthorizationCode,e.identity}},mounted:function(){this.enterView()}},y=b,v=(n("ea1a"),n("2877")),w=Object(v["a"])(y,s,u,!1,null,null,null),C=w.exports,O={name:"IdentityConfirmLoginView",mixins:[l["a"]],components:{IdentityConfirmLogin:C},data:function(){return{}},props:{ms:{type:[String],default:"",required:!0},msAlias:{type:[String],default:"",required:!0},identityRole:{type:[String],default:"",required:!1}}},S=O,x=(n("feab"),Object(v["a"])(S,r,c,!1,null,null,null)),j=x.exports,k={name:"ConfirmLogin",components:{IdentityConfirmLoginView:j},props:{identityRole:{type:[String],default:"",required:!1}},computed:Object(a["a"])({},Object(g["d"])({thirdPartySupport:function(t){return t.admin.thirdPartySupport}})),mounted:function(){console.log(this.thirdPartySupport),this.thirdPartySupport.includes(this.thirdParty)&&console.log("支持")}},A=k,L=(n("e0cd"),Object(v["a"])(A,i,o,!1,null,null,null));e["default"]=L.exports},"6d74":function(t,e,n){"use strict";n("2aac")},7902:function(t,e,n){"use strict";var i=n("ade3"),o=n("5530"),a=n("d4ec"),r=n("bee2"),c=n("262e"),l=n("2caf"),s=n("3d83"),u=n("4360"),d=n("9390"),f=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(){return Object(a["a"])(this,n),e.apply(this,arguments)}return Object(r["a"])(n,[{key:"authorizeUrl",value:function(t,e,n){var i="/".concat(t,"/authorizeurl");return s["b"].post(this.buildUrl(i),e,n)}},{key:"authorize",value:function(t,e,n){var i="/".concat(t,"/authorize");return s["b"].post(this.buildUrl(i),e,n)}},{key:"bind",value:function(t,e,n){var a="/".concat(t,"/bind"),r="".concat(t,"_access_token");return n.header=Object(o["a"])(Object(i["a"])({},r,u["a"].getters.oauth2[t]),n.header),s["b"].post(this.buildUrl(a),e,n)}},{key:"unBind",value:function(t,e,n){var a="/".concat(t,"/unBind"),r="".concat(t,"_access_token");return n.header=Object(o["a"])(Object(i["a"])({},r,u["a"].getters.oauth2[t]),n.header),s["b"].post(this.buildUrl(a),e,n)}},{key:"loginIsRegister",value:function(t,e,n){var i="/".concat(t,"/loginIsRegister");return s["b"].post(this.buildUrl(i),e,n)}}]),n}(d["a"]),p=new f("/thirdparty/oauth2");e["a"]=p},"7b95":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".identity-confirm-login-wrap{height:100%;width:100%;background-color:#f5f5f5}.identity-confirm-login-wrap .identity-login{margin-top:3.2rem}.identity-confirm-login-wrap h1{color:#eaa254;transition:.5s;margin-top:2%}.identity-confirm-login-wrap h1:hover{color:#eaa254;text-shadow:0 0 .1em,0 0 .3em}",""]),t.exports=e},"7d01":function(t,e,n){"use strict";n("05b0")},"887d":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("05c3"),o={methods:{updateRouteOk:function(){},updateRouteCancle:function(){},leaveRouteOk:function(){},leaveRouteCancle:function(){}},mounted:function(){window.addEventListener("beforeunload",(function(t){return t=t||window.event,t&&(t.returnValue=!1),!0}))},destroyed:function(){window.removeEventListener("beforeunload",(function(t){return t=t||window.event,t&&(t.returnValue=!1),!0}))},beforeRouteUpdate:function(t,e,n){var o=this.$createElement,a=this;Object(i["a"])({title:"刷新页面",content:function(){return o("div",[o("span",{style:"color:red;"},["确定要刷新该页面吗？"])])},cancelText:"取消",okText:"刷新",okType:"danger",onOk:function(){a.updateRouteOk(),n()},onCancel:function(){a.updateRouteCancle(),n(!1)}})},beforeRouteLeave:function(t,e,n){var o=this.$createElement,a=this;Object(i["a"])({title:"离开页面",content:function(){return o("div",[o("span",{style:"color:red;"},["确定要离开该页面吗？"])])},cancelText:"取消",okText:"离开",okType:"danger",onOk:function(){a.leaveRouteOk(),n()},onCancel:function(){a.leaveRouteCancle(),n(!1)}})}}},9390:function(t,e,n){"use strict";n("99af");var i=n("d4ec"),o=n("bee2"),a=n("ade3"),r=function(){function t(e){Object(i["a"])(this,t),Object(a["a"])(this,"namespace",void 0),this.namespace=e}return Object(o["a"])(t,[{key:"buildUrl",value:function(t){return"".concat(this.namespace).concat(t)}}]),t}();e["a"]=r},"9aab":function(t,e,n){var i=n("b423");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("12027dfe",i,!0,{sourceMap:!1,shadowMode:!1})},"9cc4":function(t,e,n){"use strict";var i=n("d4ec"),o=n("bee2"),a=n("262e"),r=n("2caf"),c=n("3d83"),l=n("9390"),s=function(t){Object(a["a"])(n,t);var e=Object(r["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n,[{key:"drawScanCode",value:function(t,e,n){var i="/draw";return t&&(i="/".concat(t,"/draw")),c["b"].post(this.buildUrl(i),e,n)}},{key:"enterView",value:function(t,e){var n="/enterview";return c["b"].post(this.buildUrl(n),t,e)}},{key:"confirmLogin",value:function(t,e){var n="/confirm";return c["b"].post(this.buildUrl(n),t,e)}}]),n}(l["a"]),u=new s("/scancode/login");e["a"]=u},a55b:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("identity-login-view",{attrs:{ms:"vue-antd-admin",msAlias:"Vue Antd Admin","identity-role":"user"}})],1)},o=[],a=n("1c3e"),r={name:"Login",components:{IdentityLoginView:a["a"]}},c=r,l=(n("d6db"),n("2877")),s=Object(l["a"])(c,i,o,!1,null,null,null);e["default"]=s.exports},a654:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".identity-confirm-login{width:100%;margin:0 auto}.identity-confirm-login-footer,.identity-confirm-login-header{margin:1rem 0}.identity-confirm-login-main{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:1rem 0}.identity-confirm-login-main>button{margin-top:.8rem}.identity-confirm-login-main>.device-icon{margin:.5rem 0 1rem}",""]),t.exports=e},b423:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".identity-third-party-login-wrap{height:100%;width:100%;background-color:#f5f5f5}.identity-third-party-login-wrap .identity-login{margin-top:3.2rem}.identity-third-party-login-wrap h1,.identity-third-party-login-wrap h2{color:#eaa254;transition:.5s;margin-top:2%}.identity-third-party-login-wrap h1:hover{color:#eaa254;text-shadow:0 0 .1em,0 0 .3em}.identity-third-party-login-footer-op,.thirdparty-wrap{display:flex;justify-content:space-between}.thirdparty-wrap{padding:0 15px;margin:.5rem 0 0}.thirdparty-iframe{width:100%;height:100%}",""]),t.exports=e},c58e:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".identity-third-party-login{width:100%;margin:0 auto}.ant-tabs-nav-scroll{display:flex}.login-scan-code-wrap,.login-wrap{display:flex;flex-direction:column;justify-content:center;align-items:center}.login-scan-code-wrap .login-scan-code{width:200px;height:200px}",""]),t.exports=e},c8ea:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".identity-login-wrap{height:100%;width:100%;background-color:#f5f5f5}.identity-login-wrap .identity-login{margin-top:3.2rem}.identity-login-wrap h1{color:#eaa254;transition:.5s}.identity-login-wrap h1:hover{color:#eaa254;text-shadow:0 0 .1em,0 0 .3em}.identity-login-footer-op,.thirdparty-wrap{display:flex;justify-content:space-between}.thirdparty-wrap{padding:.5rem 15px}.thirdparty-iframe{width:100%;height:100%}",""]),t.exports=e},cccf:function(t,e,n){"use strict";n("9aab")},ce42:function(t,e,n){"use strict";n("0d0a")},d6db:function(t,e,n){"use strict";n("e2a2")},d7e7:function(t,e,n){var i=n("a654");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("684d381a",i,!0,{sourceMap:!1,shadowMode:!1})},d9a0:function(t,e,n){var i=n("4db5");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("aefd4fd4",i,!0,{sourceMap:!1,shadowMode:!1})},e0cd:function(t,e,n){"use strict";n("f552")},e2a2:function(t,e,n){var i=n("2e17");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("7bebf460",i,!0,{sourceMap:!1,shadowMode:!1})},e2a8:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"identity-login"},[n("div",{staticClass:"identity-login-header"},[t._t("header")],2),n("a-tabs",{staticClass:"identity-login-tabs",attrs:{"default-active-key":"localAccount","tab-position":t.tabOption.position,"tab-bar-style":t.tabOption.tabBarStyle,size:t.tabOption.size,"tab-bar-gutter":t.tabOption.tabBarGutter},on:{change:t.changeTabs}},[n("a-tab-pane",{key:"localAccount"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-icon",{attrs:{type:"user"}}),t._v(" 本地账号登录 ")],1),n("a-form-model",t._b({attrs:{model:t.form,layout:t.formOption.layout}},"a-form-model",t.formItemLayout,!1),[n("a-form-model-item",{attrs:{label:"本地账号"}},[n("a-input",{attrs:{autocomplete:"username",placeholder:"用户名/手机/邮箱","allow-clear":""},model:{value:t.form.localAccount,callback:function(e){t.$set(t.form,"localAccount",e)},expression:"form.localAccount"}})],1),n("a-form-model-item",{attrs:{label:"密码"}},[n("a-input-password",{attrs:{autocomplete:"current-password",placeholder:"密码","allow-clear":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),n("a-form-model-item",{attrs:{"wrapper-col":t.buttonItemLayout.wrapperCol}},[n("a-button",{attrs:{type:"primary",loading:t.loginLoading.localAccount,block:""},on:{click:t.loginByLocalAccount}},[t._v(" "+t._s(t.loginLoading.localAccount?"取消登录":"登录")+" ")])],1)],1)],1),n("a-tab-pane",{key:"mail"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-icon",{attrs:{type:"mail"}}),t._v(" 邮箱登录 ")],1),n("a-form-model",t._b({attrs:{model:t.form,layout:t.formOption.layout}},"a-form-model",t.formItemLayout,!1),[n("a-form-model-item",{attrs:{label:"邮箱"}},[n("a-input",{attrs:{placeholder:"邮箱","allow-clear":""},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}})],1),n("a-form-model-item",{attrs:{label:"邮箱验证码"}},[n("a-input-group",{attrs:{compact:""}},[n("a-input",{staticStyle:{width:"70%"},attrs:{placeholder:"邮箱验证码","allow-clear":""},model:{value:t.form.svCode,callback:function(e){t.$set(t.form,"svCode",e)},expression:"form.svCode"}}),n("a-button",{staticStyle:{width:"30%"},attrs:{type:"primary"}},[n("icon",{attrs:{icon:"IconFont_send"}}),t._v(" 发送 ")],1)],1)],1),n("a-form-model-item",{attrs:{"wrapper-col":t.buttonItemLayout.wrapperCol}},[n("a-button",{attrs:{type:"primary",loading:t.loginLoading.mail,block:""},on:{click:t.loginByMail}},[t._v(" "+t._s(t.loginLoading.mail?"取消登录":"登录")+" ")])],1)],1)],1),n("a-tab-pane",{key:"mobile"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-icon",{attrs:{type:"mobile"}}),t._v(" 手机登录 ")],1),n("a-form-model",t._b({attrs:{model:t.form,layout:t.formOption.layout}},"a-form-model",t.formItemLayout,!1),[n("a-form-model-item",{attrs:{label:"手机"}},[n("a-input",{attrs:{placeholder:"手机","allow-clear":""},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),n("a-form-model-item",{attrs:{label:"手机验证码"}},[n("a-input-group",{attrs:{compact:""}},[n("a-input",{staticStyle:{width:"70%"},attrs:{placeholder:"手机验证码","allow-clear":""},model:{value:t.form.svCode,callback:function(e){t.$set(t.form,"svCode",e)},expression:"form.svCode"}}),n("a-button",{staticStyle:{width:"30%"},attrs:{type:"primary"}},[n("icon",{attrs:{icon:"IconFont_send"}}),t._v(" 发送 ")],1)],1)],1),n("a-form-model-item",{attrs:{"wrapper-col":t.buttonItemLayout.wrapperCol}},[n("a-button",{attrs:{type:"primary",loading:t.loginLoading.mobile,block:"",disabled:""},on:{click:t.loginByMobile}},[t._v(" "+t._s(t.loginLoading.mobile?"取消登录(暂不支持)":"登录(暂不支持)")+" ")])],1)],1)],1),n("a-tab-pane",{key:"scanCode"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-icon",{attrs:{type:"qrcode"}}),t._v(" 扫码登录 ")],1),n("div",{staticClass:"login-wrap login-scan-code-wrap"},[n("div",{staticClass:"login-scan-code-wrap"},[n("a-spin",{attrs:{spinning:t.loginLoading.scanCode}},[n("img",{staticClass:"login-scan-code",attrs:{src:t.loginScanCodeSrc}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:0==t.loginScanCodeExpiration,expression:"loginScanCodeExpiration == 0"}],staticClass:"login-scan-code-expiration"},[n("a-button",{attrs:{type:"primary"},on:{click:t.drawLoginScanCode}},[t._v("点击刷新登录二维码")])],1)],1),n("div",{staticClass:"login-scan-code-tips"},[n("a-alert",{attrs:{message:t.loginScanCodeAlert.message,type:t.loginScanCodeAlert.type,"show-icon":""}})],1)])])],1),n("div",{staticClass:"identity-login-footer"},[t._t("footer")],2)],1)},o=[],a=(n("caad"),n("d81d"),n("ade3")),r=n("5530"),c=n("c8d0"),l=n("414a"),s=n("2938"),u=n("d4ec"),d=n("262e"),f=n("2caf"),p=n("bee2"),h=n("15c4"),m=n("3d83"),g=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return Object(p["a"])(n,[{key:"loginByLocalAccount",value:function(t,e){var n="/login/localaccount";return m["b"].post(this.buildUrl(n),t,e)}},{key:"loginByMail",value:function(t,e){var n="/login/mail";return m["b"].post(this.buildUrl(n),t,e)}},{key:"register",value:function(t,e){var n="/register";return m["b"].post(this.buildUrl(n),t,e)}},{key:"updatePassword",value:function(t,e){var n="/password/update";return m["b"].post(this.buildUrl(n),t,e)}},{key:"bindMail",value:function(t,e){var n="/mail/bind";return m["b"].post(this.buildUrl(n),t,e)}},{key:"bindMobile",value:function(t,e){var n="/mobile/bind";return m["b"].post(this.buildUrl(n),t,e)}},{key:"upLoadAvatar",value:function(t,e){var n="/avatar/upload";return m["b"].post(this.buildUrl(n),t,e)}},{key:"getIdentity",value:function(t,e){var n="/identity";return m["b"].get(this.buildUrl(n),t,e)}}]),n}(h["a"]),b=g,y=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return n}(b),v=new y("/user"),w=v,C=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return n}(h["a"]),O=new C("/sysUser"),S=O;function x(t){return s["b"].USER.equals(t)?w:s["b"].SYS_USER.equals(t)?S:w}var j=n("2f62"),k=n("ae88"),A=n("9cc4");function L(t){return"/topic/scancode.login.".concat(t)}var _=n("c82a"),E=["localAccount","mail","mobile","scanCode"],T={name:"IdentityLogin",mixins:[c["a"],l["a"]],data:function(){return{loginCancleTokenSource:{localAccount:null,mail:null,mobile:null,scanCode:null},loginLoading:{localAccount:!1,mail:!1,mobile:!1,scanCode:!1},loginScanCode:"",loginScanCodeBase64:"",loginScanCodeExpiration:-1,loginScanCodeAvatarUrl:"",isConfirmLogin:!1,tabOption:{position:"top",tabBarStyle:{},size:"default"},formOption:{layout:"vertical"},form:{name:"",region:void 0,date1:void 0,delivery:!1,type:[],resource:"",desc:""},loginScanCodeAlert:{message:"请扫描二维码登录",type:"warning"}}},props:{identityRole:{type:[String],default:"",required:!0}},computed:Object(r["a"])(Object(r["a"])({},Object(j["d"])({identity:function(t){return t.identity.identity}})),{},{loginScanCodeSrc:function(){var t=this.loginScanCodeBase64;return t?"data:image/png;base64,".concat(t):"/lazy/qrcode.png"}}),methods:Object(r["a"])(Object(r["a"])({},Object(j["c"])(k["b"].NAMESPACE,[k["b"].SET_TOKEN,k["b"].SET_IDENTITY])),{},{changeTabs:function(t){"scanCode"==t&&this.drawLoginScanCode()},loginByLocalAccount:function(){console.log("localAccount login",this.form);var t=this;t.handleCancleWhenLogin("localAccount")||(t.loginLoading["localAccount"]={delay:1500},x(this.identityRole).loginByLocalAccount({localAccount:this.form.localAccount,password:this.form.password},Object(a["a"])({},m["a"],this.getLoginCancleTokenSource("localAccount").token)).then((function(e){t.handleAfterLogin(e.data),t.loginLoading["localAccount"]=!1})).catch((function(){t.loginLoading["localAccount"]=!1})))},loginByMail:function(){console.log("mail login",this.form);var t=this;t.handleCancleWhenLogin("mail")||(t.loginLoading["mail"]={delay:1500},x(this.identityRole).loginByMail({mail:this.form.mail,svCodeKey:this.form.mail,svCode:this.form.svCode},Object(a["a"])({},m["a"],this.getLoginCancleTokenSource("mail").token)).then((function(e){t.handleAfterLogin(e.data),t.loginLoading["mail"]=!1})).catch((function(){t.loginLoading["mail"]=!1})))},loginByMobile:function(){console.log("mobile login",this.form);var t=this;t.handleCancleWhenLogin("mobile")||(t.loginLoading["mobile"]={delay:1500},x(this.identityRole).loginByMobile({mobile:this.form.mobile,svCodeKey:this.form.mobile,svCode:this.form.svCode},Object(a["a"])({},m["a"],this.getLoginCancleTokenSource("mobile").token)).then((function(e){t.handleAfterLogin(e.data),t.loginLoading["mobile"]=!1})).catch((function(){t.loginLoading["mobile"]=!1})))},drawLoginScanCode:function(){var t=this;t.loginScanCodeExpiration&&t.loginScanCodeExpiration>0||(t.loginScanCodeExpiration=-1,t.loginLoading.scanCode=!0,t.loginScanCodeAlert={message:"正在刷新登录二维码",type:"info"},A["a"].drawScanCode(t.identityRole).then((function(e){if(1==e.data.code){var n=e.data.map,i=n.scanCode,o=n.scanCodeBase64,a=n.scanCodeExpiration;t.loginScanCode=i,t.loginScanCodeBase64=o,t.loginScanCodeExpiration=a,t.loginLoading.scanCode=!1,t.wssubscribe(L(i),(function(e){var n=JSON.parse(e.body),i=n.code,o=n.msg,a=n.map,r=a.avatarUrl,c=a.scanCodeExpiration;if(1==i){c&&(t.loginScanCodeAvatarUrl=r,t.loginScanCodeAlert={message:o||"扫码成功",type:"success"});var l=n.map,s=l.Authorization,u=l.AuthorizationCode,d=l.identity;s&&u&&d&&(t.loginScanCodeAlert={message:o||"扫码登录中。。。",type:"success"},t.handleAfterLogin(n),t.isConfirmLogin=!0)}else c&&(t.loginScanCodeExpiration=c),t.loginScanCodeAlert={message:o||"扫码失败",type:"error"}}),{}),t.loginScanCodeAlert={message:"请扫描二维码登录",type:"warning"};var r=setInterval((function(){t.isConfirmLogin||(t.loginScanCode="",t.loginScanCodeExpiration=0,t.loginScanCodeAlert={message:"请点击刷新登录二维码",type:"warning"}),clearInterval(r)}),1e3*a)}})).catch((function(e){console.log(e),t.loginLoading.scanCode=!1,t.loginScanCodeBase64="",t.loginScanCodeExpiration=0,t.loginScanCodeAlert={message:"刷新登陆二维码失败",type:"error"}})))},getLoginCancleTokenSource:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(E.includes(t)){var n=this.loginCancleTokenSource[t];return!n&&e&&(n=Object(m["c"])(),this.loginCancleTokenSource[t]=n),n}return null},handleAfterLogin:function(t){var e=this,n=t.map,i=n.Authorization,o=n.AuthorizationCode,a=n.identity;i&&o&&a&&(e[k["b"].SET_TOKEN]({token:i,tokenCode:o}),e[k["b"].SET_IDENTITY](a),Object(_["a"])({path:"/"}))},handleCancleWhenLogin:function(t){if(E.includes(t)){var e=this,n=e.loginLoading[t];if(n){var i=e.getLoginCancleTokenSource(t,!1);i&&i.cancel(),e.loginLoading[t]=!1}return n}}})},R=T,I=(n("7d01"),n("2877")),P=Object(I["a"])(R,i,o,!1,null,null,null);e["a"]=P.exports},ea1a:function(t,e,n){"use strict";n("d7e7")},edcf:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".third-party-login .identity-login{margin-top:3.2rem}.third-party-login h1{color:#000;transition:.5s}.third-party-login h1:hover{color:#000;text-shadow:0 0 .1em,0 0 .3em}",""]),t.exports=e},f552:function(t,e,n){var i=n("534f");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("6c460944",i,!0,{sourceMap:!1,shadowMode:!1})},fb62:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"third-party-login"},[n("identity-third-party-login-view",{attrs:{ms:"vue-antd-admin",msAlias:"Vue Antd Admin","identity-role":t.identityRole,thirdParty:t.thirdParty}})],1)},o=[],a=(n("caad"),n("2532"),n("5530")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"identity-third-party-login-wrap"},[n("base-header",{attrs:{showBackIcon:""}}),n("base-main",{staticStyle:{"background-color":"#f5f5f5"},attrs:{isScroll:!0,isScrollPull:!1,baseMainTop:"7.25%",baseMainHeight:"92.5%"}},[n("template",{slot:"main"},[n("a-row",{attrs:{type:"flex",justify:"center"}},[n("a-col",{attrs:{xs:22,sm:18,md:10,lg:6,xl:6}},[n("h1",{attrs:{align:"center"}},[t._v(t._s(t.msAlias))])])],1),n("a-row",{attrs:{type:"flex",justify:"center"}},[n("a-col",{attrs:{xs:22,sm:18,md:10,lg:6,xl:6}},[n("identity-third-party-login",{attrs:{"identity-role":"user",thirdParty:t.thirdParty}})],1)],1)],1)],2),n("base-modal",{attrs:{modalTitle:t.modalTitle,modalVisible:t.modalVisible},on:{"update:modalVisible":function(e){t.modalVisible=e},"update:modal-visible":function(e){t.modalVisible=e}}},[[n("iframe",{staticClass:"thirdparty-iframe",attrs:{id:"githubIframe",src:"https://github.com/login/oauth/authorize?client_id=Iv1.f804df1563d19bbc&redirect_uri=http://localhost:8080/vue-antd-admin/oauth2/github/login"}})]],2)],1)},c=[],l=n("b5d2"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"identity-third-party-login"},[n("a-result",{attrs:{status:t.isSupport?"success":"error"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 第三方登录 "),n("icon",{attrs:{icon:t.thirdPartyIcon}})]},proxy:!0},{key:"icon",fn:function(){return[n("a-icon",{attrs:{type:t.isSupport?"loading":"close-circle"}})]},proxy:!0},{key:"extra",fn:function(){return[t._v(" 登录即注册 "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.isSupport?t.thirdParty.toLocaleUpperCase():"暂不支持"))]),t._v(" 登录。。。 ")]},proxy:!0}])})],1)},u=[],d=(n("d81d"),n("ade3")),f=(n("96cf"),n("1da1")),p=n("c8d0"),h=n("2f62"),m=n("ae88"),g=n("05c3"),b=n("7902"),y=n("2938"),v={name:"IdentityOauth2Login",mixins:[p["a"]],data:function(){return{identity:{name:"kxh"},isSupport:!1,loginCancleTokenSource:{localAccount:null,mail:null,mobile:null,scanCode:null},tabOption:{position:"top",tabBarStyle:{},size:"default"},formOption:{layout:"vertical"},form:{name:"",region:void 0,date1:void 0,delivery:!1,type:[],resource:"",desc:""}}},props:{thirdParty:{type:[String],default:"",required:!0},identityRole:{type:[String],default:"",required:!0}},computed:Object(a["a"])(Object(a["a"])({},Object(h["d"])({thirdPartySupport:function(t){return t.admin.thirdPartySupport}})),{},{thirdPartyIcon:function(){return"IconFont_".concat(this.thirdParty)}}),methods:Object(a["a"])({authorize:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,i,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.query,i=n.code,o=n.state,a=t.thirdParty,e.next=4,b["a"].authorize(a,{code:i,state:o}).then((function(e){var n=e.data.map.thirdPartyOAuth2Authorize;n&&t[m["b"].SET_OAUTH2_THIRDPARTY]({thirdParty:a,thirdPartyOAuth2Authorize:n})}));case 4:case"end":return e.stop()}}),e)})))()},loginIsRegister:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.authorize();case 2:n=t.thirdParty,i="".concat(n,"_access_token"),o=t.$store.getters.oauth2[n]["accessToken"],b["a"].loginIsRegister(n,{identityRole:y["b"].of(t.identityRole).mapping||y["b"].USER.mapping},{headers:Object(d["a"])({},i,o)}).then((function(e){if(1==e.data.code){var n=e.data.map,i=n.Authorization,o=n.AuthorizationCode,a=n.identity;t[m["b"].SET_TOKEN]({token:i,tokenCode:o}),t[m["b"].SET_IDENTITY](a)}}));case 6:case"end":return e.stop()}}),e)})))()}},Object(h["c"])(m["b"].NAMESPACE,[m["b"].SET_OAUTH2_THIRDPARTY,m["b"].SET_TOKEN,m["b"].SET_IDENTITY])),mounted:function(){this.isSupport=this.thirdPartySupport.includes(this.thirdParty),this.isSupport?this.loginIsRegister():Object(g["c"])("暂不支持")}},w=v,C=(n("ce42"),n("2877")),O=Object(C["a"])(w,s,u,!1,null,null,null),S=O.exports,x=n("362d"),j={name:"IdentityThirdPartyLoginView",mixins:[l["a"]],components:{IdentityThirdPartyLogin:S,BaseModal:x["a"]},data:function(){return{modalTitle:"",modalVisible:!1}},props:{ms:{type:[String],default:"",required:!0},msAlias:{type:[String],default:"",required:!0},identityRole:{type:[String],default:"user",required:!0},thirdParty:{type:[String],default:"",required:!0}},computed:{registerUrl:function(){return["cloud","vue-antd-admin"].includes(this.ms)?"/register":"/".concat(this.ms,"/register")},forgetPasswordUrl:function(){return["cloud","vue-antd-admin"].includes(this.ms)?"/password/forget":"/".concat(this.ms,"/password/forget")}}},k=j,A=(n("cccf"),Object(C["a"])(k,r,c,!1,null,null,null)),L=A.exports,_={name:"IdentityThirdPartyLogin",components:{IdentityThirdPartyLoginView:L},props:{identityRole:{type:[String],default:"user",required:!0},thirdParty:{type:[String],default:"",required:!0}},computed:Object(a["a"])({},Object(h["d"])({thirdPartySupport:function(t){return t.admin.thirdPartySupport}})),mounted:function(){console.log(this.thirdPartySupport),this.thirdPartySupport.includes(this.thirdParty)&&console.log("支持")}},E=_,T=(n("6d74"),Object(C["a"])(E,i,o,!1,null,null,null));e["default"]=T.exports},feab:function(t,e,n){"use strict";n("67c6")}}]);