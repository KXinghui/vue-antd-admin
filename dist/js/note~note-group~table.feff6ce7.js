(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["note~note-group~table"],{"362d":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-modal",e._b({attrs:{bodyStyle:{height:e.modalHeight},centered:e.modalCentered,"ok-text":"确认","cancel-text":"取消"},on:{cancel:e.cancelModal},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},"a-modal",e.$props,!1),[o("a-spin",{staticClass:"modal-body",attrs:{spinning:e.modalLoading}},[o("a-anchor",{directives:[{name:"show",rawName:"v-show",value:e.showAnchor,expression:"showAnchor"}],staticStyle:{position:"absolute","z-index":"10",left:"5rem"},attrs:{affix:!0},on:{click:e.handleAnchorClick,change:e.handleAnchorChange}},e._l(e.anchors,(function(e){return o("a-anchor-link",{key:e.href,attrs:{href:e.href,title:e.title}})})),1),o("div",[o("span",{staticClass:"modal-btn-span"},[o("icon",{directives:[{name:"show",rawName:"v-show",value:e.showAnchor,expression:"showAnchor"}],staticClass:"modal-btn",attrs:{icon:e.showAnchor?"Antd_close":"IconFont_anchor"},on:{click:e.toggleAnchor}})],1)]),o("bs-core",{attrs:{options:{nestedScroll:!0,bounce:{top:!1,bottom:!1}},isRefresh:e.modalRefresh},on:{"update:isRefresh":function(t){e.modalRefresh=t},"update:is-refresh":function(t){e.modalRefresh=t}}},[o("div",{ref:e.modalRef,staticClass:"modal-body"},[e._t("default")],2)])],1),o("template",{slot:"title"},[o("div",[e._t("title",[e._v(e._s(e.modalTitle))])],2)]),o("template",{slot:"footer"},[o("a-spin",{attrs:{spinning:e.modalLoading}},[e._t("footer")],2)],1)],2)},i=[],a=o("dbde"),l={components:{BsCore:a["a"]},name:"BaseModal",data:function(){var e=this;return{modalRef:"base-modal-".concat(this._uid),anchorContainer:function(){return e.$refs[e.modalRef]||e.$refs[e.modalRef].$el},showAnchor:!1,modalHeight:0,visible:!1}},props:{modalRefresh:{type:[Boolean],default:!1,require:!1},modalLoading:{type:[Boolean],default:!1,require:!1},modalHeightPercent:{type:[String],default:"80%",require:!1},anchors:{type:[Array],default:function(){return[]},require:!1},modalTitle:{type:[String],default:"",require:!1},modalVisible:{type:[Boolean],default:!1,require:!1},modalCentered:{type:[Boolean],default:!0,require:!1},destroyOnClose:{type:[Boolean],default:!1,require:!1}},methods:{handleAnchorClick:function(e,t){e.preventDefault()},handleAnchorChange:function(e){this.$emit("changeAnchor",e)},toggleAnchor:function(){this.showAnchor=!this.showAnchor},resizeModalHeight:function(){var e=window.innerHeight||document.documentElement.clientHeight;this.modalHeight=e*parseFloat(this.modalHeightPercent)*.01+"px"},cancelModal:function(){this.$emit("update:modalVisible",!1)}},watch:{modalHeightPercent:function(){this.resizeModalHeight()},modalVisible:function(){this.visible=this.modalVisible}},mounted:function(){this.resizeModalHeight(),this.visible=this.modalVisible,window.addEventListener("resize",this.resizeModalHeight)},destroyed:function(){window.removeEventListener("resize",this.resizeModalHeight)}},s=l,r=(o("5d5e"),o("2877")),c=Object(r["a"])(s,n,i,!1,null,null,null);t["a"]=c.exports},"4ce4":function(e,t,o){var n=o("d49f");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=o("499e").default;i("2e567af2",n,!0,{sourceMap:!1,shadowMode:!1})},"4db5":function(e,t,o){var n=o("24fb");t=n(!1),t.push([e.i,".modal-btn-span{display:block;width:56px;height:56px;font-size:16px;font-style:normal;line-height:56px;text-align:center;text-transform:none;text-rendering:auto;position:absolute;top:0;left:0}.modal-btn{padding:0;color:rgba(0,0,0,.45);font-weight:700;line-height:1;text-decoration:none;background:transparent;border:0;outline:0;cursor:pointer;transition:color .3s}.modal-body,.modal-body .ant-spin-container{width:100%;height:100%}",""]),e.exports=t},"5d5e":function(e,t,o){"use strict";o("d9a0")},"70f7":function(e,t,o){"use strict";o("4ce4")},d49f:function(e,t,o){var n=o("24fb");t=n(!1),t.push([e.i,".base-table-wrap{background-color:#fff}.base-table-wrap .base-table .resize-table-th{position:relative}.base-table-wrap .base-table .resize-table-th .table-draggable-handle{border:none;position:absolute;height:100%!important;left:auto!important;right:-5px;transform:none!important;bottom:0;cursor:col-resize;touch-action:none}.base-table-wrap .base-table td img{width:100%}.base-table-form-wrap,.base-table-header-wrap{border:1px solid red;display:flex;flex-direction:row;justify-content:space-between;align-content:center}.base-table-form-wrap{margin:1rem 0 2rem}",""]),e.exports=t},d9a0:function(e,t,o){var n=o("4db5");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=o("499e").default;i("aefd4fd4",n,!0,{sourceMap:!1,shadowMode:!1})},e934:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:e.baseTableRef,staticClass:"base-table-wrap",attrs:{id:e.baseTableRef}},[o("div",{staticClass:"base-table-form-wrap"},[e._t("tableForm")],2),o("div",{staticClass:"base-table-header-wrap"},[e._t("tableHeader"),o("div",[o("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.openModal("columnSetting")}}},[e._v("列设置")]),o("a-dropdown",[o("a-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowBatch,expression:"isShowBatch"}],attrs:{type:"primary"}},[o("icon",{attrs:{icon:"IconFont_batch-op"}}),e._v(e._s(e.isBatch?"取消批量":"批量"))],1),o("a-menu",{attrs:{slot:"overlay",placement:"bottomRight"},slot:"overlay"},[o("a-menu-item",{key:"1",on:{click:function(t){return e.ableBatchOp("radio")}}},[o("icon",{attrs:{icon:"Antd_check-circle"}}),e._v(e._s(e.isBatch&&"radio"==e.rowSelectionType?"取消单选":"单选")+" ")],1),o("a-menu-item",{key:"2",on:{click:function(t){return e.ableBatchOp("checkbox")}}},[o("icon",{attrs:{icon:"Antd_check-square"}}),e._v(e._s(e.isBatch&&"checkbox"==e.rowSelectionType?"取消多选":"多选")+" ")],1)],1)],1)],1)],2),o("a-table",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!0,filter:function(){return!e.isBatch}},expression:"{\n      movable: true,\n      filter: function() {\n        return !isBatch;\n      }\n    }"}],staticClass:"base-table",attrs:{scroll:{x:!0,scrollToFirstRowOnChange:!1},bordered:"",loading:e.loading,"row-key":e.rowKey,columns:e.columns,"data-source":e.data,pagination:e.pagination,"row-selection":e.rowSelection,"custom-row":e.customRow,components:e.tableComponents},scopedSlots:e._u([e._l(e.columns,(function(t){return{key:t.scopedSlots?t.scopedSlots.customRender:"",fn:function(o,n){return[e._t(t.scopedSlots?t.scopedSlots.customRender:"",[e._v(e._s(t.scopedSlots?t.scopedSlots.customRender:""))],null,n)]}}}))],null,!0)},[o("div",{staticClass:"base-table-title-wrap",attrs:{slot:"title"},slot:"title"},[e._t("tableTitle")],2),o("div",{staticClass:"base-table-footer-wrap",attrs:{slot:"footer"},slot:"footer"},[e._t("tableFooter")],2)]),e.contextmenuVisible?o("a-menu",{style:e.contextmenuStyle,attrs:{id:e.contextmenuId}},[e._t("contextmenu",[o("a-menu-item",{key:"1"},[e._v(" 1st menu item ")]),o("a-menu-item",{key:"2"},[e._v(" 2nd menu item ")]),o("a-menu-item",{key:"3"},[e._v(" 3rd menu item ")])])],2):e._e(),o("a-modal",{attrs:{title:"Vertically centered modal dialog",centered:""},on:{ok:function(){return e.settingModalVisible=!1}},model:{value:e.settingModalVisible,callback:function(t){e.settingModalVisible=t},expression:"settingModalVisible"}},[o("a-collapse",{attrs:{accordion:""}},[o("a-collapse-panel",{key:"1",attrs:{header:"This is panel header 1"}},[o("p",[e._v(e._s(e.text))])]),o("a-collapse-panel",{key:"2",attrs:{header:"This is panel header 2",disabled:!1}},[o("p",[e._v(e._s(e.text))])]),o("a-collapse-panel",{key:"3",attrs:{header:"This is panel header 3"}},[o("p",[e._v(e._s(e.text))])])],1)],1),o("base-modal",{attrs:{modalRefresh:e.modalRefresh.columnSetting,modalVisible:e.modalVisible.columnSetting,modalTitle:e.modalTitle.columnSetting,modalLoading:e.modalLoading.columnSetting},on:{"update:modalRefresh":function(t){return e.$set(e.modalRefresh,"columnSetting",t)},"update:modal-refresh":function(t){return e.$set(e.modalRefresh,"columnSetting",t)},"update:modalVisible":function(t){return e.$set(e.modalVisible,"columnSetting",t)},"update:modal-visible":function(t){return e.$set(e.modalVisible,"columnSetting",t)},"update:modalLoading":function(t){return e.$set(e.modalLoading,"columnSetting",t)},"update:modal-loading":function(t){return e.$set(e.modalLoading,"columnSetting",t)}}},[o("template",{slot:"footer"})],2)],1)},i=[],a=o("f5c8"),l=o("dbde"),s=o("362d"),r=void 0,c={tableLayout:"",bordered:!0,childrenColumnName:["children"],columns:[],components:null,dataSource:[],defaultExpandAllRows:!1,defaultExpandedRowKeys:[],expandedRowKeys:[],expandedRowRender:function(e,t,o,n){},expandIcon:function(e,t,o,n){},expandRowByClick:!1,expandIconColumnIndex:0,footer:function(e){},indentSize:10,loading:!1,locale:null,pagination:{},rowClassName:function(e,t){},rowKey:"id",rowSelection:null,scroll:!0,showHeader:!0,size:"default",title:function(e){},customHeaderRow:function(e,t){},customRow:function(e){return{on:{click:function(t){r.clickRow(t,e)},dblclick:function(t){r.dblclickRow(t,e)},contextmenu:function(t){r.contextmenuRow(t,e)}}}},transformCellText:function(e){e.text,e.column,e.record,e.index}},d={name:"BaseTable",mixins:[a["a"]],components:{BsCore:l["a"],BaseModal:s["a"]},data:function(){return{text:"asdfasdf",table:c,modalRefresh:{columnSetting:!1},modalVisible:{columnSetting:!1},modalTitle:{columnSetting:""},modalLoading:{columnSetting:!0}}},methods:{},mounted:function(){console.log()}},u=d,h=(o("70f7"),o("2877")),m=Object(h["a"])(u,n,i,!1,null,null,null);t["default"]=m.exports},f5c8:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));o("99af"),o("7db0"),o("caad"),o("c975"),o("a434");var n=o("2909"),i=o("5530");o("a4d3"),o("b64b");function a(e,t){if(null==e)return{};var o,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}function l(e,t){if(null==e)return{};var o,n,i=a(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var s={data:function(){var e=this;return{baseTableRef:"baseTable".concat(this._uid),settingModalVisible:!1,contextmenuId:"contextmenu".concat(this._uid),contextmenuVisible:!1,contextmenuStyle:{position:"absolute",top:"0",left:"0",zIndex:1,borderRadius:"5px",border:"1px solid #eee"},table:{rowKey:"id"},customRow:function(t){return{props:{},on:{click:function(o){e.clickRow(o,t)},dblclick:function(o){e.dblclickRow(o,t)},contextmenu:function(o){e.contextmenuRow(o,t)},mouseenter:function(o){e.mouseenterRow(o,t)},mouseleave:function(o){e.mouseleaveRow(o,t)}}}}}},props:{isScrollRefresh:{typoe:[Boolean],default:!1,requrire:!1},loading:{typoe:[Boolean],default:!1,requrire:!1},isBatch:{typoe:[Boolean],default:!1,requrire:!1},isShowBatch:{typoe:[Boolean],default:!0,requrire:!1},rowKey:{typoe:[String],default:"id",requrire:!1},rowSelectionType:{typoe:[String],default:"checkbox",requrire:!1,validator:function(e){return["checkbox","radio"].includes(e)}},selectedRowKeys:{typoe:[Array],default:function(){return[]},requrire:!1},data:{typoe:[Array],default:function(){return[]},requrire:!1},columns:{typoe:[Array],default:function(){return[]},requrire:!1},pagination:{typoe:[Object],default:function(){var e=this;return{total:0,pageSize:NaN,disabled:!1,hideOnSinglePage:!1,pageSizeOptions:["5","10","20","30","40"],showLessItems:!1,showQuickJumper:!0,showSizeChanger:!0,simple:!1,onChange:function(t,o){e.$emit("changePage",t,o)},onShowSizeChange:function(t,o){e.$emit("changePage",t,o)}}},requrire:!1}},computed:{tableComponents:function(){var e=this;return{header:{cell:function(t,o,a){var s=o.key,r=l(o,["key"]),c=e.columns.find((function(e){var t=e.dataIndex||e.key;return e.isResize&&t===s}));if(!c||!c.width)return t("th",Object(i["a"])({},r),Object(n["a"])(a));var d={key:c.dataIndex||c.key,class:"table-draggable-handle",attrs:{w:10,x:c.width,z:1,axis:"x",draggable:!0,resizable:!1},on:{dragging:function(e){var t=Math.max(e,1);c.minWidth&&c.minWidth>t?c.width=c.minWidth:c.maxWidth&&c.maxWidth<t?c.width=c.maxWidth:c.width=t}}},u=t("vue-draggable-resizable",Object(i["a"])({},d));return t("th",Object(i["a"])(Object(i["a"])({},r),{},{class:"resize-table-th"}),[].concat(Object(n["a"])(a),[u]))}}}},rowSelection:function(){if(!this.isBatch)return null;var e=this;return{columnWidth:"50",fixed:!1,hideDefaultSelections:!1,type:this.rowSelectionType,selectedRowKeys:this.selectedRowKeys,onChange:function(t,o){e.$emit("update:selectedRowKeys",t)},onSelect:function(e,t,o,n){},onSelectAll:function(e,t,o){},onSelectInvert:function(e){}}}},methods:{openModal:function(e){console.log("打开表单："+e),this.form=e,this.modalLoading[e]=!1,this.modalVisible[e]=!0,this.modalRefresh[e]=!0,"columnSetting"==e&&(this.modalTitle[e]="列设置")},ableBatchOp:function(e){var t=this.isBatch,o=this.rowSelectionType,n=o!=e||!t;this.$emit("update:rowSelectionType",e),this.$emit("update:isBatch",n),n||this.$emit("update:selectedRowKeys",[])},customRowFunc:function(e,t){this.$emit("".concat(e.type,'"'),t)},clickRow:function(e,t){if(this.customRowFunc(e,t),this.isBatch){var o=t[this.table.rowKey],i=Object(n["a"])(this.selectedRowKeys),a=i.indexOf(o),l=-1!=a;"radio"==this.rowSelectionType?i=l?[]:[o]:l?i.splice(a,1):i.push(o),this.$emit("update:selectedRowKeys",i)}},dblclickRow:function(e,t){this.customRowFunc(e,t)},contextmenuRow:function(e,t){this.customRowFunc(e,t);var o=document.getElementById(this.contextmenuId);this.contextmenuVisible=!0;var n=o?o.clientWidth||o.offsetWidth:0,i=o?o.clientHeight||o.offsetHeight:0;e.preventDefault();var a=e.clientX,l=e.clientY;console.log(document.getElementById(this.baseTableRef));var s=this.$refs[this.baseTableRef].offsetWidth,r=this.$refs[this.baseTableRef].offsetHeight,c=window.screen.availWidth||window.innerWidth||document.documentElement.clientWidth,d=window.screen.availHeight||window.innerHeight||document.documentElement.clientHeight;console.log(s+"======"+r),console.log(c+"======"+d);var u=a-(c-s),h=l*(r/d);this.contextmenuStyle.top=(h+i>r?h-i:h)+"px",this.contextmenuStyle.left=(u+n>s?u-n:u)+"px",console.log(u+"======"+h),document.addEventListener("click",this.cancelContextmenu),console.log(this.contextmenuStyle.top),console.log(this.contextmenuStyle.left)},cancelContextmenu:function(){this.contextmenuVisible=!1,document.body.removeEventListener("click",this.cancelContextmenu)},mouseenterRow:function(e,t){this.customRowFunc(e,t)},mouseleaveRow:function(e,t){this.customRowFunc(e,t)}},watch:{data:function(){this.isScrollRefresh=!0}},mounted:function(){console.log("columns "+JSON.stringify(this.columns))}}}}]);