(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pvtnote-note"],{"271f":function(t,e,r){var a=r("24fb");e=a(!1),e.push([t.i,".base-drawer-bar-wrap .ant-drawer-wrapper-body{height:100%}.base-drawer-bar-bottom-wrap .ant-drawer-content .ant-drawer-wrapper-body .ant-drawer-body,.base-drawer-bar-top-wrap .ant-drawer-content .ant-drawer-wrapper-body .ant-drawer-body{height:100%;padding:0 1rem;display:flex;justify-content:space-between;align-items:center}.base-drawer-bar-wrap .top-close-text{cursor:pointer}.base-drawer-bar-bottom-wrap .identity-avatar,.base-drawer-bar-top-wrap .identity-avatar{padding:0}",""]),t.exports=e},"2db8":function(t,e,r){var a=r("a608");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=r("499e").default;o("283705ea",a,!0,{sourceMap:!1,shadowMode:!1})},"5bb5":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chat-wrap"},[r("base-header",{attrs:{showDrawerIcon:""}},[r("div",{attrs:{slot:"left"},slot:"left"},[t._v("便签")]),r("div",{attrs:{slot:"right"},slot:"right"},[r("icon",{attrs:{icon:"IconFont_batch-op"},on:{click:t.openBatchDrawerBar}}),r("icon",{attrs:{icon:"Antd_search"},on:{click:function(e){return t.pushRoute("/search")}}})],1)]),r("base-tab-bar",{attrs:{"base-tab-bars":t.baseTabBars,"active-item-key":t.activeKey,color:t.color,"active-color":t.activeColor}}),r("base-drawer",{attrs:{width:"300px",visible:t.showDrawer,placement:t.drawerPlacement},on:{"update:visible":function(e){t.showDrawer=e}}},[r("identity-avatar",{attrs:{identity:t.identity,avatarSize:58,avatarShape:"square"}})],1),r("base-drawer-bar",{attrs:{topVisible:t.topDrawerBarVisible,bottomVisible:t.bottomDrawerBarVisible,topHeightPercent:t.topDrawerBarHeightPercent,bottomHeightPercent:t.bottomDrawerBarHeightPercent},on:{"update:topVisible":function(e){t.topDrawerBarVisible=e},"update:top-visible":function(e){t.topDrawerBarVisible=e},"update:bottomVisible":function(e){t.bottomDrawerBarVisible=e},"update:bottom-visible":function(e){t.bottomDrawerBarVisible=e}}},[r("template",{slot:"top"},[t.management.batch?[r("span",{on:{click:t.closeDrawerBar}},[t._v("取消")]),r("span",[t._v("已选择"),r("span",{staticClass:"selected-num",domProps:{textContent:t._s(t.selectedNoteIds.length)}}),t._v("项")]),r("span",{on:{click:t.closeDrawerBar}},[t._v("全选")])]:t._e()],2),r("template",{slot:"bottom"},[t.management.batch&&!t.operation.currentOp?[r("base-tab-bar-item",{attrs:{item:{index:"move",icon:"Antd_drag",text:"移动",route:!1}},on:{click:t.moveNote}}),r("base-tab-bar-item",{attrs:{item:{index:"top",icon:t.isTopOnBatch?"Antd_vertical-align-top":"Antd_vertical-align-bottom",text:t.isTopOnBatch?"置顶":"取消置顶",route:!1}},on:{click:t.topNote}}),r("base-tab-bar-item",{attrs:{item:{index:"delete",icon:"Antd_delete",text:"删除",route:!1}},on:{click:t.deleteNote}})]:t._e(),"batch-move"==t.operation.currentOp?[t._v(" 移动便签 ")]:t._e()],2)],2)],1)},o=[],i=(r("4160"),r("159b"),r("5530")),n=r("b5d2"),s=r("9185"),c=r("39a9"),l=r("2f62"),d=r("ae88"),p=r("eb77"),h=r("05c3"),b={name:"Note",mixins:[n["a"],s["a"]],components:{IdentityAvatar:c["a"],BaseTabBarItem:p["a"]},data:function(){return{msName:"pvtnote",activeTabIndex:0,management:{batch:!1},operation:{currentOp:"",batch:["delete","move","top","cancelTop","selectAll"]},notes:[],selectedNoteIds:[]}},computed:Object(i["a"])(Object(i["a"])({},Object(l["d"])({identity:function(t){return t.identity.identity}})),{},{isTopOnBatch:function(){var t=!0;if(this.management.batch){var e=0,r=this.selectedNoteIds;this.notes.forEach((function(t){r.inclued(t.id)&&1==t.isTop&&e++}));var a=r.length;0!=a&&e==a&&(t=!1)}return t}}),methods:Object(i["a"])(Object(i["a"])({getSelectedNotes:function(){var t=[],e=this.selectedNoteIds;return this.notes.forEach((function(r){e.inclued(r.id)&&t.push(Object.assign({},r))})),t}},Object(l["c"])("admin",[d["a"].SHOW_DRAWER])),{},{closeDrawerBar:function(){var t=this.management.batch;t&&(this.management.batch=!this.management.batch,this.hideDrawerBar())},openBatchDrawerBar:function(){this.hideDrawerBar(),this.management.batch=!0,this.operation.currentOp="",this.showDrawerBar()},moveNote:function(){this.operation.currentOp="batch-move",this.hideDrawerBar(),this.showBottomDrawerBar("80%")},topNote:function(){this.isTopOnBatch;var t=this.isTopOnBatch,e=t?"置顶":"取消置顶";Object(h["a"])({title:e,content:function(t){return t("div",{style:{color:"red"},text:"确定要".concat(e,"所选便签？")})},cancelText:"取消",okText:e,onOk:function(){console.log("OK")},onCancel:function(){}})},deleteNote:function(){var t=this.$createElement;Object(h["a"])({title:"删除便签",content:function(){return t("div",{style:"color:red;"},["确定要删除所选便签？"])},cancelText:"取消",okText:"删除",okType:"danger",onOk:function(){console.log("OK")},onCancel:function(){}})}})},u=b,m=(r("e053"),r("2877")),w=Object(m["a"])(u,a,o,!1,null,null,null);e["default"]=w.exports},9185:function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"base-drawer-bar-wrap"},[r("a-drawer",t._b({staticClass:"base-drawer-bar-top-wrap",attrs:{width:t.topWidth,height:t.topHeight,title:t.topTitle,placement:"top",closable:!1,visible:t.topVisible,wrapClassName:t.topWrapClassName,mask:t.topMask},on:{close:t.onClose}},"a-drawer",t.$props,!1),[r("span",{directives:[{name:"show",rawName:"v-show",value:t.showClose,expression:"showClose"}],staticClass:"top-close-text",domProps:{textContent:t._s(t.closeText)},on:{click:t.onClose}}),t._t("top")],2),r("a-drawer",t._b({staticClass:"base-drawer-bar-bottom-wrap",attrs:{width:t.bottomWidth,height:t.bottomHeight,title:t.bottomTitle,placement:"bottom",closable:!1,visible:t.bottomVisible,wrapClassName:t.bottomWrapClassName,mask:t.bottomMask},on:{close:t.onClose}},"a-drawer",t.$props,!1),[t._t("bottom")],2)],1)},o=[],i={name:"BaseDrawer",data:function(){return{topHeight:"3.5rem",bottomHeight:"3.5rem"}},props:{showClose:{type:[Boolean],default:!1,required:!1},closeText:{type:[String],default:"取消",required:!1},topWrapClassName:{type:[String],default:"left",required:!1},bottomWrapClassName:{type:[String],default:"left",required:!1},topHeightPercent:{type:[String],default:"7.25%",required:!1},bottomHeightPercent:{type:[String],default:"7.25%",required:!1},topWidth:{type:[String],default:"",required:!1},bottomWidth:{type:[String],default:"",required:!1},topTitle:{type:[String],default:"",required:!1},bottomTitle:{type:[String],default:"",required:!1},topVisible:{type:[Boolean],default:!0,required:!1},bottomVisible:{type:[Boolean],default:!0,required:!1},topMask:{type:[Boolean],default:!1,required:!1},bottomMask:{type:[Boolean],default:!1,required:!1}},methods:{onClose:function(){this.$emit("update:topVisible",!this.topVisible),this.$emit("update:bottomVisible",!this.bottomVisible)},resizeBaseDrawerBarHeight:function(){var t=window.innerHeight||document.documentElement.clientHeight;this.topHeight=t*parseFloat(this.topHeightPercent)*.01,this.bottomHeight=t*parseFloat(this.bottomHeightPercent)*.01}},watch:{topHeightPercent:function(){this.resizeBaseDrawerBarHeight()},bottomHeightPercent:function(){this.resizeBaseDrawerBarHeight()}},mounted:function(){this.resizeBaseDrawerBarHeight(),window.addEventListener("resize",this.resizeBaseDrawerBarHeight)},destroyed:function(){window.removeEventListener("resize",this.resizeBaseDrawerBarHeight)}},n=i,s=(r("ea18"),r("2877")),c=Object(s["a"])(n,a,o,!1,null,null,null),l=c.exports,d=180,p={components:{BaseDrawerBar:l},data:function(){return{topDrawerBarVisible:!1,bottomDrawerBarVisible:!1,resetTopDrawerBarHeightPercent:"7.25%",resetBottomDrawerBarHeightPercent:"7.25%",topDrawerBarHeightPercent:"7.25%",bottomDrawerBarHeightPercent:"7.25%"}},computed:{},methods:{resetDrawerBar:function(){this.topDrawerBarHeightPercent=this.resetTopDrawerBarHeightPercent,this.bottomDrawerBarHeightPercent=this.resetBottomDrawerBarHeightPercent},showDrawerBar:function(){var t=this;this.hideDrawerBar();var e=setTimeout((function(){t.topDrawerBarVisible=!0,t.bottomDrawerBarVisible=!0,clearTimeout(e)}),d)},hideDrawerBar:function(){this.topDrawerBarVisible=!1,this.bottomDrawerBarVisible=!1,this.resetDrawerBar()},showTopDrawerBar:function(t){var e=this;this.hideDrawerBar();var r=setTimeout((function(){e.topDrawerBarHeightPercent=t,e.topDrawerBarVisible=!0,clearTimeout(r)}),d)},showBottomDrawerBar:function(t){var e=this;this.hideDrawerBar();var r=setTimeout((function(){e.bottomDrawerBarHeightPercent=t,e.bottomDrawerBarVisible=!0,clearTimeout(r)}),d)}}}},a608:function(t,e,r){var a=r("24fb");e=a(!1),e.push([t.i,".chat-wrap{height:100%;background-color:#f5f5f5}.selected-num{font-size:1rem;padding:0 .3rem}",""]),t.exports=e},e053:function(t,e,r){"use strict";r("2db8")},ea18:function(t,e,r){"use strict";r("ecf6")},ecf6:function(t,e,r){var a=r("271f");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=r("499e").default;o("a66c1812",a,!0,{sourceMap:!1,shadowMode:!1})}}]);