(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"07df":function(t,e,i){"use strict";var o=i("ade3"),n=i("5530"),a=i("d4ec"),r=i("bee2"),s=i("262e"),l=i("2caf"),c=i("15c4"),d=i("3d83"),u=i("4360"),h=function(t){Object(s["a"])(i,t);var e=Object(l["a"])(i);function i(){return Object(a["a"])(this,i),e.apply(this,arguments)}return Object(r["a"])(i,[{key:"authorizeUrl",value:function(t,e,i){var o="/".concat(t,"/authorizeurl");return d["a"].post(this.buildUrl(o),e,i)}},{key:"authorize",value:function(t,e,i){var o="/".concat(t,"/authorize");return d["a"].post(this.buildUrl(o),e,i)}},{key:"bind",value:function(t,e,i){var a="/".concat(t,"/bind"),r="".concat(t,"_access_token");return i.header=Object(n["a"])(Object(o["a"])({},r,u["a"].getters.oauth2[t]),i.header),d["a"].post(this.buildUrl(a),e,i)}},{key:"unBind",value:function(t,e,i){var a="/".concat(t,"/unBind"),r="".concat(t,"_access_token");return i.header=Object(n["a"])(Object(o["a"])({},r,u["a"].getters.oauth2[t]),i.header),d["a"].post(this.buildUrl(a),e,i)}},{key:"loginIsRegister",value:function(t,e,i){var o="/".concat(t,"/loginIsRegister");return d["a"].post(this.buildUrl(o),e,i)}}]),i}(c["a"]),p=new h("/thirdparty/oauth2");e["a"]=p},"0d0a":function(t,e,i){var o=i("c58e");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("499e").default;n("4de19a0a",o,!0,{sourceMap:!1,shadowMode:!1})},"17ce":function(t,e,i){"use strict";i("6489")},"1c3e":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"identity-login-wrap"},[i("base-header",{attrs:{showBackIcon:""}}),i("base-main",{staticStyle:{"background-color":"#f5f5f5"},attrs:{isScroll:!0,isScrollPull:!1,baseMainTop:"7.25%",baseMainHeight:"92.5%"}},[i("template",{slot:"main"},[i("a-row",{attrs:{type:"flex",justify:"center"}},[i("a-col",{attrs:{xs:22,sm:18,md:10,lg:6,xl:6}},[i("h1",{attrs:{align:"center"}},[t._v(t._s(t.msAlias))])])],1),i("a-row",{attrs:{type:"flex",justify:"center"}},[i("a-col",{attrs:{xs:22,sm:18,md:10,lg:6,xl:6}},[i("identity-login",{attrs:{"identity-role":"user"},scopedSlots:t._u([{key:"footer",fn:function(){return[i("div",{staticClass:"identity-login-footer-op"},[i("a-button",{attrs:{type:"link"},on:{click:function(e){return t.pushRoute({path:t.registerUrl})}}},[i("span",[t._v("注册")])]),i("a-button",{attrs:{type:"link"},on:{click:function(e){return t.pushRoute({path:t.forgetPasswordUrl})}}},[i("span",[t._v("忘记密码")])])],1),i("div",{staticClass:"thirdparty-wrap"},[i("a-button",{attrs:{size:"large",shape:"circle",title:"GitHub"},on:{click:function(e){return t.authorizeUrl("github")}}},[i("icon",{attrs:{icon:"IconFont_github"}})],1),i("a-button",{attrs:{size:"large",shape:"circle",title:"GitHub"},on:{click:function(e){return t.authorizeUrl("gitee")}}},[i("icon",{attrs:{icon:"IconFont_gitee"}})],1),i("a-button",{attrs:{size:"large",shape:"circle",title:"开源中国"},on:{click:function(e){return t.authorizeUrl("oschina")}}},[i("icon",{attrs:{icon:"IconFont_oschina"}})],1),i("a-button",{attrs:{size:"large",shape:"circle",title:"支付宝"},on:{click:function(e){return t.authorizeUrl("alipay")}}},[i("icon",{attrs:{icon:"IconFont_alipay"}})],1),i("a-button",{attrs:{disabled:"",size:"large",shape:"circle",title:"微博"},on:{click:function(e){return t.authorizeUrl("weibo")}}},[i("icon",{attrs:{icon:"IconFont_weibo"}})],1),i("a-button",{attrs:{disabled:"",size:"large",shape:"circle",title:"微信"},on:{click:function(e){return t.authorizeUrl("wechat")}}},[i("icon",{attrs:{icon:"IconFont_wechat"}})],1),i("a-button",{attrs:{disabled:"",size:"large",shape:"circle",title:"QQ"},on:{click:function(e){return t.authorizeUrl("qq")}}},[i("icon",{attrs:{icon:"IconFont_qq"}})],1)],1)]},proxy:!0}])})],1)],1)],1)],2),i("base-modal",{attrs:{modalTitle:t.modalTitle,modalVisible:t.modalVisible},on:{"update:modalVisible":function(e){t.modalVisible=e},"update:modal-visible":function(e){t.modalVisible=e}}},[[i("iframe",{staticClass:"thirdparty-iframe",attrs:{id:"githubIframe",src:"https://github.com/login/oauth/authorize?client_id=Iv1.f804df1563d19bbc&redirect_uri=http://localhost:8080/vue-antd-admin/oauth2/github/login"}})]],2)],1)},n=[],a=(i("caad"),i("d81d"),i("5530")),r=i("b5d2"),s=i("e2a8"),l=i("362d"),c=i("2f62"),d=i("07df"),u={name:"IdentityLoginView",mixins:[r["a"]],components:{IdentityLogin:s["a"],BaseModal:l["a"]},data:function(){return{modalTitle:"",modalVisible:!1,oauthLogin:"github"}},props:{ms:{type:[String],default:"",required:!0},msAlias:{type:[String],default:"",required:!0},identityRole:{type:[String],default:"",required:!0}},computed:Object(a["a"])({registerUrl:function(){return["cloud","vue-antd-admin"].includes(this.ms)?"/register":"/".concat(this.ms,"/register")},forgetPasswordUrl:function(){return["cloud","vue-antd-admin"].includes(this.ms)?"/password/forget":"/".concat(this.ms,"/password/forget")}},Object(c["d"])({github:function(t){return t.oauth2.github},layoutSetting:function(t){return t.admin.layoutSetting},loading:function(t){return t.admin.loading}})),methods:{authorizeUrl:function(t){d["a"].authorizeUrl(t).then((function(t){var e=t.data.map.authorizeUrl;console.log(e),e&&(window.location.href=e)}))}}},h=u,p=(i("17ce"),i("2877")),f=Object(p["a"])(h,o,n,!1,null,null,null);e["a"]=f.exports},"2aac":function(t,e,i){var o=i("edcf");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("499e").default;n("53ff3030",o,!0,{sourceMap:!1,shadowMode:!1})},"2e17":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,".login .identity-login{margin-top:3.2rem}.login h1{color:#000;transition:.5s}.login h1:hover{color:#000;text-shadow:0 0 .1em,0 0 .3em}",""]),t.exports=e},"362d":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",t._b({attrs:{bodyStyle:{height:t.modalHeight},title:t.modalTitle,centered:t.modalCentered,"ok-text":"确认","cancel-text":"取消"},on:{cancel:t.cancelModal},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},"a-modal",t.$props,!1),[i("a-spin",{staticClass:"modal-body",attrs:{spinning:t.modalLoading}},[i("a-anchor",{directives:[{name:"show",rawName:"v-show",value:t.showAnchor,expression:"showAnchor"}],staticStyle:{position:"absolute","z-index":"10",left:"5rem"},attrs:{affix:!0},on:{click:t.handleAnchorClick,change:t.handleAnchorChange}},t._l(t.anchors,(function(t){return i("a-anchor-link",{key:t.href,attrs:{href:t.href,title:t.title}})})),1),i("div",[i("span",{staticClass:"modal-btn-span"},[i("icon",{directives:[{name:"show",rawName:"v-show",value:t.showAnchor,expression:"showAnchor"}],staticClass:"modal-btn",attrs:{icon:t.showAnchor?"Antd_close":"IconFont_anchor"},on:{click:t.toggleAnchor}})],1)]),i("div",{ref:t.modalRef,staticClass:"modal-body"},[t._t("default")],2)],1),i("template",{slot:"footer"},[i("a-spin",{attrs:{spinning:t.modalLoading}},[t._t("footer")],2)],1)],2)},n=[],a={components:{},name:"BaseModal",data:function(){var t=this;return{modalRef:"base-modal-".concat(this._uid),anchorContainer:function(){return t.$refs[t.modalRef]||t.$refs[t.modalRef].$el},showAnchor:!1,modalHeight:0,visible:!1}},props:{modalRefresh:{type:[Boolean],default:!1,require:!1},modalLoading:{type:[Boolean],default:!1,require:!1},modalHeightPercent:{type:[String],default:"80%",require:!1},anchors:{type:[Array],default:function(){return[]},require:!1},modalTitle:{type:[String],default:"",require:!1},modalVisible:{type:[Boolean],default:!1,require:!1},modalCentered:{type:[Boolean],default:!0,require:!1},destroyOnClose:{type:[Boolean],default:!1,require:!1}},methods:{handleAnchorClick:function(t,e){t.preventDefault()},handleAnchorChange:function(t){this.$emit("changeAnchor",t)},toggleAnchor:function(){this.showAnchor=!this.showAnchor},resizeModalHeight:function(){var t=window.innerHeight||document.documentElement.clientHeight;this.modalHeight=t*parseFloat(this.modalHeightPercent)*.01+"px"},cancelModal:function(){this.$emit("update:modalVisible",!1)}},watch:{modalHeightPercent:function(){this.resizeModalHeight()},modalVisible:function(){this.visible=this.modalVisible}},mounted:function(){this.resizeModalHeight(),window.addEventListener("resize",this.resizeModalHeight)},destroyed:function(){window.removeEventListener("resize",this.resizeModalHeight)}},r=a,s=(i("5d5e"),i("2877")),l=Object(s["a"])(r,o,n,!1,null,null,null);e["a"]=l.exports},"4db5":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,".modal-btn-span{display:block;width:56px;height:56px;font-size:16px;font-style:normal;line-height:56px;text-align:center;text-transform:none;text-rendering:auto;position:absolute;top:0;left:0}.modal-btn{padding:0;color:rgba(0,0,0,.45);font-weight:700;line-height:1;text-decoration:none;background:transparent;border:0;outline:0;cursor:pointer;transition:color .3s}.modal-body,.modal-body .ant-spin-container{width:100%;height:100%}",""]),t.exports=e},"5d5e":function(t,e,i){"use strict";i("d9a0")},6489:function(t,e,i){var o=i("c8ea");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("499e").default;n("eef92208",o,!0,{sourceMap:!1,shadowMode:!1})},"6d74":function(t,e,i){"use strict";i("2aac")},"9aab":function(t,e,i){var o=i("b423");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("499e").default;n("12027dfe",o,!0,{sourceMap:!1,shadowMode:!1})},a55b:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("identity-login-view",{attrs:{ms:"vue-antd-admin",msAlias:"Vue Antd Admin","identity-role":"user"}})],1)},n=[],a=i("1c3e"),r={name:"Login",components:{IdentityLoginView:a["a"]}},s=r,l=(i("d6db"),i("2877")),c=Object(l["a"])(s,o,n,!1,null,null,null);e["default"]=c.exports},b423:function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,".identity-third-party-login-wrap{height:100%;width:100%;background-color:#f5f5f5}.identity-third-party-login-wrap .identity-login{margin-top:3.2rem}.identity-third-party-login-wrap h1,.identity-third-party-login-wrap h2{color:#eaa254;transition:.5s;margin-top:2%}.identity-third-party-login-wrap h1:hover{color:#eaa254;text-shadow:0 0 .1em,0 0 .3em}.identity-third-party-login-footer-op,.thirdparty-wrap{display:flex;justify-content:space-between}.thirdparty-wrap{padding:0 15px;margin:.5rem 0 0}.thirdparty-iframe{width:100%;height:100%}",""]),t.exports=e},c58e:function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,".identity-third-party-login{width:100%;margin:0 auto}.ant-tabs-nav-scroll{display:flex}.login-scan-code-wrap,.login-wrap{display:flex;flex-direction:column;justify-content:center;align-items:center}.login-scan-code-wrap .login-scan-code{width:200px;height:200px}",""]),t.exports=e},c8ea:function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,".identity-login-wrap{height:100%;width:100%;background-color:#f5f5f5}.identity-login-wrap .identity-login{margin-top:3.2rem}.identity-login-wrap h1{color:#eaa254;transition:.5s}.identity-login-wrap h1:hover{color:#eaa254;text-shadow:0 0 .1em,0 0 .3em}.identity-login-footer-op,.thirdparty-wrap{display:flex;justify-content:space-between}.thirdparty-wrap{padding:.5rem 15px}.thirdparty-iframe{width:100%;height:100%}",""]),t.exports=e},cccf:function(t,e,i){"use strict";i("9aab")},ce42:function(t,e,i){"use strict";i("0d0a")},d6db:function(t,e,i){"use strict";i("e2a2")},d9a0:function(t,e,i){var o=i("4db5");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("499e").default;n("aefd4fd4",o,!0,{sourceMap:!1,shadowMode:!1})},e2a2:function(t,e,i){var o=i("2e17");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("499e").default;n("7bebf460",o,!0,{sourceMap:!1,shadowMode:!1})},edcf:function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,".third-party-login .identity-login{margin-top:3.2rem}.third-party-login h1{color:#000;transition:.5s}.third-party-login h1:hover{color:#000;text-shadow:0 0 .1em,0 0 .3em}",""]),t.exports=e},fb62:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"third-party-login"},[i("identity-third-party-login-view",{attrs:{ms:"vue-antd-admin",msAlias:"Vue Antd Admin","identity-role":"user",thirdParty:t.thirdParty}})],1)},n=[],a=(i("caad"),i("2532"),i("5530")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"identity-third-party-login-wrap"},[i("base-header",{attrs:{showBackIcon:""}}),i("base-main",{staticStyle:{"background-color":"#f5f5f5"},attrs:{isScroll:!0,isScrollPull:!1,baseMainTop:"7.25%",baseMainHeight:"92.5%"}},[i("template",{slot:"main"},[i("a-row",{attrs:{type:"flex",justify:"center"}},[i("a-col",{attrs:{xs:22,sm:18,md:10,lg:6,xl:6}},[i("h1",{attrs:{align:"center"}},[t._v(t._s(t.msAlias))])])],1),i("a-row",{attrs:{type:"flex",justify:"center"}},[i("a-col",{attrs:{xs:22,sm:18,md:10,lg:6,xl:6}},[i("identity-third-party-login",{attrs:{"identity-role":"user",thirdParty:t.thirdParty}})],1)],1)],1)],2),i("base-modal",{attrs:{modalTitle:t.modalTitle,modalVisible:t.modalVisible},on:{"update:modalVisible":function(e){t.modalVisible=e},"update:modal-visible":function(e){t.modalVisible=e}}},[[i("iframe",{staticClass:"thirdparty-iframe",attrs:{id:"githubIframe",src:"https://github.com/login/oauth/authorize?client_id=Iv1.f804df1563d19bbc&redirect_uri=http://localhost:8080/vue-antd-admin/oauth2/github/login"}})]],2)],1)},s=[],l=(i("d81d"),i("ade3")),c=(i("96cf"),i("1da1")),d=i("b5d2"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"identity-third-party-login"},[i("a-result",{attrs:{status:t.isSupport?"success":"error",title:"第三方登陆"},scopedSlots:t._u([{key:"icon",fn:function(){return[i("a-icon",{attrs:{type:t.isSupport?"loading":"close-circle"}})]},proxy:!0},{key:"extra",fn:function(){return[t._v(" 登陆即注册 "+t._s(t.isSupport?t.thirdParty.toLocaleUpperCase():"暂不支持")+" 登陆。。。 ")]},proxy:!0}])})],1)},h=[],p=i("c8d0"),f=i("373d"),g=i("2f62"),m=i("ae88"),y={name:"IdentityOauth2Login",mixins:[p["a"]],data:function(){return{identity:{name:"kxh"},isSupport:!1,loginCancleTokenSource:{localAccount:null,mail:null,mobile:null,scanCode:null},tabOption:{position:"top",tabBarStyle:{},size:"default"},formOption:{layout:"vertical"},form:{name:"",region:void 0,date1:void 0,delivery:!1,type:[],resource:"",desc:""}}},props:{thirdParty:{type:[String],default:"",required:!0},identityRole:{type:[String],default:"",required:!0}},computed:Object(a["a"])({},Object(g["d"])({thirdPartySupport:function(t){return t.admin.thirdPartySupport}})),methods:Object(a["a"])(Object(a["a"])({},Object(g["c"])("identity",[m["b"].SET_TOKEN,m["b"].SET_IDENTITY])),{},{changeTabs:function(t){4==t&&(this.loginScanCodeBase64||console.log(t,this.loginScanCodeBase64))},loginByLocalAccount:function(){var t=this;console.log("localaccount login",this.form),Object(f["a"])(this.identityRole).loginByLocalAccount({localAccount:this.form.localAccount,password:this.form.password},{}).then((function(e){e.data.map&&t[m["b"].SET_TOKEN]({token:e.data.map["Authorization"],tokenCode:e.data.map["AuthorizationCode"]}),console.log(e.data.map)}))},loginByMail:function(){console.log("mail login",this.form)},loginByMobile:function(){console.log("mobile login",this.form)},getLoginCancleTokenSource:function(t){switch(t){case"LOCALACCOUNT":break;default:break}}}),created:function(){console.log(this.$route.query.code),console.log(this.$route.params)},mounted:function(){var t=this.thirdParty;this.isSupport=this.thirdPartySupport.includes(t),this.isSupport&&("github"===t||("gitee"===t?console.log("gitee"):"oschina"===t&&console.log("oschina")))}},b=y,v=(i("ce42"),i("2877")),w=Object(v["a"])(b,u,h,!1,null,null,null),x=w.exports,_=i("362d"),k=i("07df"),S=i("2938"),A={name:"IdentityThirdPartyLoginView",mixins:[d["a"]],components:{IdentityThirdPartyLogin:x,BaseModal:_["a"]},data:function(){return{modalTitle:"",modalVisible:!1,oauthLogin:"github"}},props:{ms:{type:[String],default:"",required:!0},msAlias:{type:[String],default:"",required:!0},identityRole:{type:[String],default:"user",required:!0},thirdParty:{type:[String],default:"",required:!0}},computed:Object(a["a"])({registerUrl:function(){return["cloud","vue-antd-admin"].includes(this.ms)?"/register":"/".concat(this.ms,"/register")},forgetPasswordUrl:function(){return["cloud","vue-antd-admin"].includes(this.ms)?"/password/forget":"/".concat(this.ms,"/password/forget")}},Object(g["d"])({oauth2:function(t){return t.getters.oauth2}})),methods:Object(a["a"])({authorize:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var i,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.$route.query.state,o=t.$route.query.code,n=t.thirdParty,e.next=5,k["a"].authorize(n,{code:o,state:i}).then((function(e){var i=e.data.map.thirdPartyOAuth2Authorize;console.log(i),i&&t[m["b"].SET_OAUTH2_THIRDPARTY]({thirdParty:n,thirdPartyOAuth2Authorize:i})}));case 5:case"end":return e.stop()}}),e)})))()},loginIsRegister:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var i,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.authorize();case 2:i=t.thirdParty,o="".concat(i,"_access_token"),n=t.$store.getters.oauth2[i]["accessToken"],k["a"].loginIsRegister(i,{identityRoleEnum:S["b"].of(t.identityRole).mapping||S["b"].USER.mapping},{headers:Object(l["a"])({},o,n)}).then((function(t){console.log(JSON.stringify(t.data.map))}));case 6:case"end":return e.stop()}}),e)})))()}},Object(g["c"])("identity",[m["b"].SET_OAUTH2_THIRDPARTY])),mounted:function(){this.loginIsRegister()}},O=A,z=(i("cccf"),Object(v["a"])(O,r,s,!1,null,null,null)),j=z.exports,P={name:"Login",components:{IdentityThirdPartyLoginView:j},props:{thirdParty:{type:[String],default:"",required:!0}},computed:Object(a["a"])({},Object(g["d"])({thirdPartySupport:function(t){return t.admin.thirdPartySupport}})),mounted:function(){console.log(this.thirdPartySupport),this.thirdPartySupport.includes(this.thirdParty)&&console.log("支持")}},T=P,C=(i("6d74"),Object(v["a"])(T,o,n,!1,null,null,null));e["default"]=C.exports}}]);